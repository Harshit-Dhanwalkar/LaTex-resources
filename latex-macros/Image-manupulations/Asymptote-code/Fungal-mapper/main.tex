% sudo apt install asymptote
%
% To process it with `latexmk`, create file `latexmkrc`:
%
%     sub asy {return system("asy '$_[0]'");}
%     add_cus_dep("asy","eps",0,"asy");
%     add_cus_dep("asy","pdf",0,"asy");
%     add_cus_dep("asy","tex",0,"asy");
%
% and run `latexmk -pdf igrid.tex`.
% it will generate main-1_0.tex and main-1_1.tex and corresponding pdfs with main mergered pdf

\documentclass{article}
\usepackage[inline]{asymptote}
\usepackage{lmodern}

\begin{document}
\begin{figure}
	\begin{asy}
		import graph;
		import math;

		defaultpen(fontsize(10pt));
		real sc=2;
		unitsize(sc*1bp);
		real wd=200*sc;
		real ht=120*sc;

		// Image used from http://upload.wikimedia.org/wikipedia/commons/1/16/Mycena_interrupta.jpg
		label(
		shift(wd/2,ht/2)*
		graphic("Mycena_interrupta.jpg"
		,"width="+string(wd)+"bp"
		+",height="+string(ht)+"bp"
		+",scale="+string(sc)
		),(0,0)
		);
		layer();

		draw(((0,0)--(wd,ht)/sc),blue+2pt);

		int ngrid=10;
		int n=(int)(wd/ngrid/sc);
		int m=(int)(ht/ngrid/sc);
		add(scale(ngrid)*grid(n,m,yellow));

		//xlimits(0,wd/sc,crop=true);
		//ylimits(0,ht/sc,crop=true);
		xaxis( 0,wd/sc,RightTicks(Step=ngrid));
		yaxis(0,ht/sc,LeftTicks(Step=ngrid));

		pair[] P={
		(66,34),
		(70,35),
		(76,38),
		(80,37),
		(84,37),
		(87,42),
		(90,49),
		(91,54),
		(92,60),
		(93,65),
		(97,65),
		(100,65),
		(103,66),
		(105,67),
		(101,71),
		(97,74),
		(95,75),
		(92,76),
		(94,78),
		(98,79),
		(101,80),
		(103,80),
		(103,83),
		(100,85),
		(96,88),
		(91,87),
		(86,86),
		(82,86),
		(78,86),
		(74,86),
		(70,83),
		(69,83),
		(67,86),
		(65,87),
		(59,88),
		(54,88),
		(51,87),
		(47,87),
		(42,86),
		(38,85),
		(34,84),
		(31,82),
		(29,80),
		(29,77),
		(33,76),
		(35,76),
		(36,76),
		(36,74),
		(35,73),
		(33,70),
		(33,69),
		(36,68),
		(40,68),
		(41,68),
		(44,67),
		(46,67),
		(47,64),
		(47,60),
		(49,55),
		(52,48),
		(55,41),
		(58,35),
		(63,31),
		};
		guide g=graph(P,operator..)..cycle;
		fill(g,white+opacity(0.8));
		draw(g,orange+1bp);
	\end{asy}
\end{figure}
\end{document}
